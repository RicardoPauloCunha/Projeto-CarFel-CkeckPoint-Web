@using Projeto_CarFel_CkeckPoint_Web.Models;
@using Projeto_CarFel_CheckPoint_Web.Models;
@{
    @if (ViewBag.UserLog == 1)
    {
        ViewBag.Title = "Central de Depoimentos";
    }
    else
    {
        ViewBag.Title = "Depoimentos";
    }
    Layout = "MasterPageDeslogado";
}

<div class="titulo flex-container">
    <div class="titulo-item">
        @if (ViewBag.UserLog == 1)
        {
            <h2>Central de Depoimentos</h2>
        }
        else
        {
            <h2>Depoimentos</h2>
        }
        
    </div>
</div>

<main>
    @if (ViewBag.UserLog == 1)
    { 
        <section class="depoimentos depoimentos-pag">
            <h2>Depoimentos</h2>

            <div class="Usuarios-dep">
                @TempData["AvaliacaoSucesso"]
                @foreach (var dep in ViewData["Depoimentos"] as List<DepoimentoModel>)
                {
                    if (dep.Aprovado == false)
                    {
                        <div class="user-dep">
                            <div class="flex-container">
                                <div class="dep-img">
                                    <img src="/imagem/user.png" alt="icone de usuario">		
                                </div>
                                <div class="dep-container">          
                                    <div class="dep-header flex-container">
                                        <div class="dh-text">
                                            <p><b>@dep.Usuario.Nome</b></p>
                                            <p>@dep.DataCriacao</p>
                                        </div>
                                        <!-- <div class="dh-like flex-container">
                                            <img src="/imagem/like.png" alt="icone de like" style="width:2.5em; height: auto; margin-right: 0.5em;">
                                            <p>100</p>
                                        </div> -->
                                    </div>
                                    <div class="dep-main">
                                        <p>@dep.Texto</p>
                                    </div>
                                    <div class="dep-footer flex-container">
                                        <div class="df-aprovado">
                                            <button style="margin-right: 0.5em"><a href="/Depoimento/Aprovar?id=@dep.Id">Aprovado</a></button>
                                        </div>
                                        <div class="df-reprovado">
                                            <button><a href="/Depoimento/Reprovar?id=@dep.Id">Reprovado</a></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="dep-barra"></div>
                        </div>
                    }
                }
            </div>

            <div class="dep-buttons flex-container">
              <button><a href="/Pagina/Home">Voltar</a></button>
            </div>	
        </section>
    }

    else
    {
        <section class="depoimentos depoimentos-pag">
            <h2>Depoimentos</h2>

            @if (ViewBag.UserLog > 0)
            {
                <div class="user-dep-escrever">
                    <div class="flex-container">
                        <div class="dep-img flex-container" style="justify-content: flex-end;">
                            <img src="/imagem/user.png" alt="icone de usuario" style="height: 3em;">		
                        </div>
                        <div class="dep-container-escrever">
                            <div class="dep-header flex-container">
                                <div class="dh-text">
                                    <p><b>@ViewBag.UsuarioLogN</b></p>
                                </div>
                            </div>
                            <textarea placeholder="Deixe seu depoimento:" class="contato-item-form-input dep-textarea"></textarea>
                            <input type="submit" value="Enviar" class="form-button">
                        </div>
                    </div>	
                </div>
            }

            <div class="Usuarios-dep">
                @foreach (var dep in ViewData["Depoimentos"] as List<DepoimentoModel>)
                {
                    if (dep.Aprovado == true)
                    {
                        <div class="user-dep">
                            <div class="flex-container">
                                <div class="dep-img">
                                    <img src="/imagem/user.png" alt="icone de usuario">		
                                </div>
                                <div class="dep-container">          
                                    <div class="dep-header flex-container">
                                        <div class="dh-text">
                                            <p><b>@dep.Usuario.Nome</b></p>
                                            <p>@dep.DataCriacao</p>
                                        </div>
                                        <!-- <div class="dh-like flex-container">
                                            <img src="/imagem/like.png" alt="icone de like" style="width:2.5em; height: auto; margin-right: 0.5em;">
                                            <p>100</p>
                                        </div> -->
                                    </div>
                                    <div class="dep-main">
                                        <p>@dep.Texto</p>
                                    </div>
                                </div>
                            </div>
                            <div class="dep-barra"></div>
                        </div>
                    }
                }
            </div>

            <div class="dep-buttons flex-container">
              <button><a href="/Pagina/Home">Voltar</a></button>
            </div>	
        </section>
    }
</main>
